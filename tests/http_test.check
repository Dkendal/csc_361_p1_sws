#include "../src/http.c"

#test test_index
  ck_assert_str_eq(request("GET /index.html HTTP/1.0"), "HTTP/1.0 200 OK");
#
#test test_root
  ck_assert_str_eq(request("GET / HTTP/1.0"), "HTTP/1.0 200 OK");

#test test_get_subdir
  ck_assert_str_eq(request("GET /gnu/main.html HTTP/1.0"), "HTTP/1.0 200 OK");

#test test_404
  ck_assert_str_eq(request("GET /nofile HTTP/1.0"), "HTTP/1.0 404 Not Found");

#test test_404_subdir
  ck_assert_str_eq(request("GET /gnu/nofile HTTP/1.0"), "HTTP/1.0 404 Not Found");

#test test_http_verb_insensitivity
  ck_assert_str_eq(request("get / http/1.0"), "HTTP/1.0 200 OK");

#test test_case_sensitivity
  ck_assert_str_eq(request("GET /Index.html HTTP/1.0"), "HTTP/1.0 404 Not Found");

#test test_malformed_request
  ck_assert_str_eq(request("GET http.request HTTP/1.0"), "HTTP/1.0 400 Bad Request");

#test test_unreadable_file
  ck_assert_str_eq(request("GET /cantRead HTTP/1.0"), "HTTP/1.0 404 Not Found");

#test test_version_mismatch
  ck_assert_str_eq(request("GET /index.html HTTP/1.1"), "HTTP/1.0 400 Bad Request");

#test test_directory_and_version_mismatch
  ck_assert_str_eq(request("GET /gnu/ HTTP/1.1"), "HTTP/1.0 400 Bad Request");

#test test_no_such_verb
  ck_assert_str_eq(request("got / http/1.0"), "HTTP/1.0 400 Bad Request");

#test test_cant_read_parent
  ck_assert_str_eq(request("GET /../ HTTP/1.0"), "HTTP/1.0 404 Not Found");
